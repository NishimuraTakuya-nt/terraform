# AWSリソース管理用

## terraform version
v1.8.0

## プロジェクト構造

このプロジェクトは、Terraformを使用してインフラストラクチャを管理するための構造化されたモジュラーなアプローチを提供します。プロジェクトは、再利用可能なモジュールと環境固有の設定のために別々のディレクトリに編成されています。

### ディレクトリ構造

プロジェクトには、以下のディレクトリ構造があります：

```
.
├── modules/
│   ├── network/
│   │   └── ...
│   ├── compute/
│   │   └── ...
│   ├── database/
│   │   └── ...
│   ├── storage/
│   │   └── ...
│   └── monitoring/
│       └── ...
├── env/
│   ├── common/
│   │   └── ...
│   ├── dev/
│   │   └── ...
│   └── prod/
│       └── ...
└── README.md
```

### modules

`modules` ディレクトリには、リソースカテゴリ別に編成された再利用可能なTerraformモジュールが含まれています。各モジュールは、特定のリソースまたは関連するリソースのグループをカプセル化します。モジュールは自己完結型であり、異なる環境で使用できるように設計されています。

利用可能なモジュールには以下が含まれます：

- `network`: VPC、サブネット、セキュリティグループ、ルートテーブル、インターネットゲートウェイ、NATゲートウェイ、ネットワークACLなどのネットワークリソース用のモジュールが含まれています。
- `compute`: EC2インスタンス、ECSクラスター、オートスケーリンググループ、ロードバランサー（ALBとNLB）などのコンピュートリソース用のモジュールが含まれています。
- `database`: RDSインスタンス、DynamoDBテーブル、ElastiCache（RedisとMemcached）、DocumentDBなどのデータベースリソース用のモジュールが含まれています。
- `storage`: S3バケットやEFSファイルシステムなどのストレージリソース用のモジュールが含まれています。
- `monitoring`: CloudWatchやDatadogなどの監視リソース用のモジュールが含まれています。

### 環境

`env` ディレクトリには、環境固有の設定が含まれています。各環境（例：`dev`、`prod`）には、必要なTerraform設定を含む独自のディレクトリがあります。

`env` 内の `common` ディレクトリには、すべての環境で共有されるリソースが含まれています。これには、IAMロール、S3バケット、CloudWatch、VPCエンドポイント、Route53、WAFなどのリソースが含まれます。

各環境ディレクトリ（`dev`、`prod`）には、その環境に固有の設定が含まれています。これらには以下が含まれます：

- `vpc`: 環境のVPC設定を定義します。
- `api`: APIインフラストラクチャに関連するリソースを定義します。
- `batch`: バッチ処理に関連するリソースを定義します。
- `monitoring`: 環境の監視設定を定義します。

## 使用方法

このプロジェクトを使用するには、`env` ディレクトリ内の目的の環境ディレクトリ（例：`env/dev`）に移動します。`terraform init` を実行して、Terraformワーキングディレクトリを初期化し、必要なプロバイダープラグインをダウンロードします。

各環境ディレクトリの `terraform.tfvars` ファイルを変更して、その特定の環境に必要な変数の値を提供します。

`terraform plan` を使用して変更のプレビューを行い、`terraform apply` を使用してTerraform設定で定義されたリソースを作成または更新します。

